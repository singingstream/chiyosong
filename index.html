<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>åƒä»£æµ¦è¶ç¾æ­Œæ ãƒªã‚¹ãƒˆ</title>
  <style>
    body {
      font-family: sans-serif;
      background: #f9f9f9;
      padding: 20px;
      color: #333;
    }

    h1 {
      text-align: center;
      margin-bottom: 20px;
    }

    #searchBox {
      display: block;
      margin: 0 auto 30px auto; /* ä¸‹ã«ç©ºç™½ã‚’ã¤ã‘ã‚‹ */
      padding: 10px;
      width: 100%;
      max-width: 400px;
      font-size: 1em;
      border-radius: 8px;
      border: 1px solid #ccc;
    }

    details {
      background: #fff;
      padding: 15px;
      margin-bottom: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    summary {
      font-size: 1.2em;
      cursor: pointer;
      font-weight: bold;
      margin-bottom: 10px;
    }

    summary a {
      font-size: 0.9em;
      margin-left: 10px;
      text-decoration: none;
      color: #0077cc;
    }

    ul {
      list-style: none;
      padding-left: 0;
    }

    li {
      padding: 5px 0;
    }

    .highlight {
      background-color: yellow;
      font-weight: bold;
    }

    .count {
      font-size: 1.2em;
      font-weight: bold;
      margin-bottom: 1em;
    }

    /* ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    #song-index button {
      padding: 4px 8px;
      cursor: pointer;
    }

    /* ãƒ¦ãƒ‹ãƒ¼ã‚¯æ›²ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹å…¨ä½“ã®è¡¨ç¤ºã‚¨ãƒªã‚¢ */
    #song-index {
    padding: 10px 0;
    display: block;
    margin-bottom: 40px; /* â† ã“ã‚ŒãŒã‚¹ãƒšãƒ¼ã‚¹éƒ¨åˆ† */
    }


    /* æ›²ä¸€è¦§ãƒªã‚¹ãƒˆã®ã‚¨ãƒªã‚¢ */
    #unique-songs-list {
      display: none;
      margin-top: 10px;
    }

    /* ãƒªãƒ³ã‚¯ */
    a {
      text-decoration: none;
    }
  </style>

</head>
<body>

<!-- ãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒˆãƒ« -->
<h1 style="text-align: center; margin-bottom: 10px;">
  <a href="http://www.youtube.com/@chiyomi0812" target="_blank" style="text-decoration: none; color: inherit;">
    åƒä»£æµ¦è¶ç¾æ­Œæ ãƒªã‚¹ãƒˆ
  </a>
</h1>
  
<!-- æ›²æ¤œç´¢ãƒãƒ¼ -->
<input type="text" id="searchBox" onkeyup="filterSongs()" placeholder="æ›²åã§æ¤œç´¢ï¼ˆä¾‹: ã„ã¡ã€ã«ã®ã€ã•ã‚“ã£ï¼ï¼‰" style="display: block; margin: 0 auto; padding: 10px; width: 100%; max-width: 400px; font-size: 1em; border-radius: 8px; border: 1px solid #ccc; margin-bottom: 30px;">

<div class="count" id="count-display" style="cursor: pointer; font-weight: bold; font-size: 24px; margin-bottom: 15px;">
  ğŸ¤ <span>åˆè¨ˆæ­Œæ å›æ•°: </span><span id="total-songs-count">0</span>å›
</div>

<div id="unique-count-display" style="cursor: pointer; font-weight: bold; font-size: 24px; margin-bottom: 15px;">
  ğŸ¶ <span>æ­Œã£ãŸæ›²æ•°: </span><span id="unique-count">0</span>æ›²ï¼ˆã‚¯ãƒªãƒƒã‚¯ã§ç´¢å¼•ã‚’è¡¨ç¤ºï¼‰
</div>

<!-- æ›²ã®ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆç´¢å¼•ãƒœã‚¿ãƒ³è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
<div id="song-index" style="display: none; margin-top: 10px; flex-wrap: wrap; gap: 12px;"></div>

<!-- ãƒ¦ãƒ‹ãƒ¼ã‚¯æ›²ã®ãƒªã‚¹ãƒˆè¡¨ç¤ºã‚¨ãƒªã‚¢ -->
<div id="unique-songs-list" style="display: none; margin-top: 10px;"></div>

<p><a href="date-list.html">ğŸ“… å¹´æœˆæ—¥ã‹ã‚‰æ¢ã™</a></p>
  
<p><a href="index-list.html">ğŸ”¤ ç´¢å¼•ã§æ¢ã™</a></p>
  
  <!-- ã“ã®ãƒšãƒ¼ã‚¸ã«ã¤ã„ã¦ãƒªãƒ³ã‚¯ -->
<div style="text-align: center; margin-bottom: 30px;">
  <a href="about.html" style="font-size: 1em; text-decoration: none; color: #0077cc;">
    ğŸ“˜ ã“ã®ãƒšãƒ¼ã‚¸ã«ã¤ã„ã¦
  </a>
</div>
  
<script>
function filterSongs() {
  const input = document.getElementById("searchBox").value.toLowerCase();
  const detailsList = document.querySelectorAll("details");

  detailsList.forEach(details => {
    const songs = details.querySelectorAll("li");
    let match = false;

    songs.forEach(song => {
      const originalText = song.textContent;
      song.innerHTML = originalText;
      song.classList.remove("highlight");

      if (input !== "" && originalText.toLowerCase().includes(input)) {
        const regex = new RegExp(`(${input})`, 'gi');
        song.innerHTML = originalText.replace(regex, `<span class="highlight">$1</span>`);
        match = true;
      }
    });

    details.style.display = match || input === "" ? "block" : "none";
  });
}

document.addEventListener("DOMContentLoaded", () => {
  const allSongs = document.querySelectorAll("li");
  const songSet = new Set();
  const songCounts = {};

  // ã‚«ã‚¦ãƒ³ãƒˆã¨é‡è¤‡å‰Šé™¤å‡¦ç†
  allSongs.forEach(li => {
    const name = li.textContent.trim();
    if (!songCounts[name]) {
      songCounts[name] = { count: 1, elements: [li] };
    } else {
      songCounts[name].count++;
      songCounts[name].elements.push(li);
    }
    songSet.add(name);
  });

   // ç´¢å¼•ã‚’ã‚¯ãƒªãƒƒã‚¯ã§è¡¨ç¤ºã•ã›ã‚‹
  document.getElementById("count-display").textContent = `ğŸ¤ åˆè¨ˆæ­Œæ å›æ•°: ${document.querySelectorAll("details > details > details").length} å›`;
  const countSpan = document.getElementById("unique-count");
  const listContainer = document.getElementById("unique-songs-list");
  const indexContainer = document.getElementById("song-index");

   // ç´¢å¼•ã®æ–‡å­—
  const sortedSongs = Array.from(songSet).sort((a, b) => a.localeCompare(b, 'ja'));
  const indexes = ["0-9", ..."ABCDEFGHIJKLMNOPQRSTUVWXYZ", "ã‚", "ã‹", "ã•", "ãŸ", "ãª", "ã¯", "ã¾", "ã‚„", "ã‚‰", "ã‚", "æ¼¢å­—", "ãã®ä»–"];


  function getInitial(song) {
    const c = song[0].toUpperCase();
    const charMap = {"ï¼¡":"A","ï¼¢":"B","ï¼£":"C","ï¼¤":"D","ï¼¥":"E","ï¼¦":"F","ï¼§":"G","ï¼¨":"H","ï¼©":"I","ï¼ª":"J","ï¼«":"K","ï¼¬":"L","ï¼­":"M","ï¼®":"N","ï¼¯":"O","ï¼°":"P","ï¼±":"Q","ï¼²":"R","ï¼³":"S","ï¼´":"T","ï¼µ":"U","ï¼¶":"V","ï¼·":"W","ï¼¸":"X","ï¼¹":"Y","ï¼º":"Z"};
    const normalized = charMap[c] || c;

    if (/[0-9]/.test(normalized)) return "0-9";
    if (/[A-Z]/.test(normalized)) return normalized;

    const kanaGroups = {
      "ã‚": "ã‚ã„ã†ãˆãŠã‚¢ã‚¤ã‚¦ãƒ´ã‚¨ã‚ª",
      "ã‹": "ã‹ããã‘ã“ã‚«ã‚­ã‚¯ã‚±ã‚³ãŒããã’ã”ã‚¬ã‚®ã‚°ã‚²ã‚´",
      "ã•": "ã•ã—ã™ã›ãã‚µã‚·ã‚¹ã‚»ã‚½ã–ã˜ãšãœãã‚¶ã‚¸ã‚ºã‚¼ã‚¾",
      "ãŸ": "ãŸã¡ã¤ã¦ã¨ã‚¿ãƒãƒ„ãƒ†ãƒˆã ã¢ã¥ã§ã©ãƒ€ãƒ‚ãƒ…ãƒ‡ãƒ‰",
      "ãª": "ãªã«ã¬ã­ã®ãƒŠãƒ‹ãƒŒãƒãƒ",
      "ã¯": "ã¯ã²ãµã¸ã»ãƒãƒ’ãƒ•ãƒ˜ãƒ›ã°ã³ã¶ã¹ã¼ãƒãƒ“ãƒ–ãƒ™ãƒœã±ã´ã·ãºã½ãƒ‘ãƒ”ãƒ—ãƒšãƒ",
      "ã¾": "ã¾ã¿ã‚€ã‚ã‚‚ãƒãƒŸãƒ ãƒ¡ãƒ¢",
      "ã‚„": "ã‚„ã‚†ã‚ˆãƒ¤ãƒ¦ãƒ¨",
      "ã‚‰": "ã‚‰ã‚Šã‚‹ã‚Œã‚ãƒ©ãƒªãƒ«ãƒ¬ãƒ­",
      "ã‚": "ã‚ã‚’ã‚“ãƒ¯ãƒ²ãƒ³"
    };
    for (const key in kanaGroups) {
      if (kanaGroups[key].includes(song[0])) return key;
    }
    if (/[ä¸€-é¿¿]/.test(song[0])) return "æ¼¢å­—";
    return "ãã®ä»–";
  }

  const grouped = {};
  sortedSongs.forEach(song => {
    const initial = getInitial(song);
    if (!grouped[initial]) grouped[initial] = [];
    grouped[initial].push(song);
  });


// ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã•ã‚ŒãŸæ›²ãƒªã‚¹ãƒˆã‚’ä½œæˆã™ã‚‹éƒ¨åˆ†ã§ã€å›æ•°ã‚‚ä¸€ç·’ã«è¡¨ç¤º
indexes.forEach(index => {
  const btn = document.createElement("button");
  btn.textContent = `${index}`;
  btn.onclick = () => {
    listContainer.innerHTML = "";
    (grouped[index] || []).forEach(song => {
      const count = songCounts[song]?.count || 1; // å›æ•°ã‚’å–å¾—
      const div = document.createElement("div");
      div.textContent = `ğŸµ ${song}ï¼ˆ${count}å›ï¼‰`;  // æ›²åã¨å›æ•°ã‚’è¡¨ç¤º
      listContainer.appendChild(div);
    });
    listContainer.style.display = "block";
  };
  indexContainer.appendChild(btn);
});

 const allBtn = document.createElement("button");
  allBtn.textContent = "ä¸€è¦§(æ­Œå”±å›æ•°ã®å¤šã„é †)";
  allBtn.onclick = () => {
    const isHidden = listContainer.style.display === "none" || listContainer.innerHTML === "";
    if (isHidden) {
      listContainer.innerHTML = "";

     // å›æ•°ã®å¤šã„é †ã«ã‚½ãƒ¼ãƒˆã—ã¦è¡¨ç¤º
const sortedByCount = [...sortedSongs].sort((a, b) => {
  const countA = songCounts[a]?.count || 1;
  const countB = songCounts[b]?.count || 1;
  return countB - countA;
});

sortedByCount.forEach(song => {
  const count = songCounts[song]?.count || 1;
  const div = document.createElement("div");
  div.textContent = `ğŸµ ${song}ï¼ˆ${count}å›ï¼‰`;
  listContainer.appendChild(div);
});

      listContainer.style.display = "block";
    } else {
      listContainer.style.display = "none";
    }
  };
  indexContainer.appendChild(allBtn);

  countSpan.textContent = songSet.size;
  document.getElementById("unique-count-display").addEventListener("click", () => {
    indexContainer.style.display = indexContainer.style.display === "none" ? "flex" : "none";
    listContainer.style.display = "none";
  });
});
</script>

</body>
</html>
